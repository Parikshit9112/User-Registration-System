<!DOCTYPE html>
<html lang="en" th:replace="~{base ::parent(~{::#content},~{::title},~{::script})}">
<head>
    <title>Registation</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div id="content" class="mt-4">
       
            <div class="block max-w-sm mx-auto p-6 bg-white border-t-4 border-blue-700 rounded-xl shadow hover:bg-gray-50 dark:bg-gray-700 dark:border-blue-700 dark:hover:bg-gray-600">

            <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white">Registation</h5>
            <div data-th-replace="~{message::messagebox}">
            </div>

            
           <form 
                data-th-action="@{'https://user-registration-system-production.up.railway.app/do-register'}" 
                method="post"  
                data-th-object="${userform}"
                novalidate
                class="mt-3">
            <!-- name field -->
            <div class="">
            <label for="name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your Name</label>
            <div class="grid md:grid-cols-2 md:gap-6">
                <div class="relative z-0 w-full mb-5 group">
                
                <input 
                    type="text" 
                    id="firstName"
                    data-th-field="*{firstName}" 
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="First Name" required
                     />
                    <p 
                       data-th-if="${#fields.hasErrors('firstName')}"
                       data-th-errors="*{firstName}"
                       class="text-red-600 text-sm px-1 dark:text-red-500"
                       >
                    </p>
                </div>

                <div class="relative z-0 w-full mb-5 group">
                    <input 
                        type="text" 
                        id="lastName"
                        data-th-field="*{lastName}" 
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Last Name" required
                         />
                        <p 
                           data-th-if="${#fields.hasErrors('lastName')}"
                           data-th-errors="*{lastName}"
                           class="text-red-600 text-sm px-1 dark:text-red-500"
                           >
                        </p>
                    </div>
            </div>
        </div>
            <!-- gender filed-->
            <div>
                <label for="name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Gender</label>
                <fieldset>
                    <legend class="sr-only">gender</legend>
                    <div id="radio" class="flex items-center mb-4 space-x-3">
                        <input id="gender-option-1" type="radio" name="gender" value="Male" class="w-4 h-4border-gray-300 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-600 dark:focus:bg-blue-600 dark:bg-gray-700 dark:border-gray-600" >
                        <label for="gender-option-1" class="block ms-2  text-sm font-medium text-gray-900 dark:text-gray-300">
                          Male
                        </label>
                        <input id="gender-option-2" type="radio" name="gender" value="Female" class="w-4 h-4 border-gray-300 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-600 dark:focus:bg-blue-600 dark:bg-gray-700 dark:border-gray-600" >
                        <label for="gender-option-2" class="block ms-2  text-sm font-medium text-gray-900 dark:text-gray-300">
                          Female
                        </label>
                    </label>
                    <input id="gender-option-3" type="radio" name="gender" value="Other" class="w-4 h-4 border-gray-300 focus:ring-2 focus:ring-blue-300 dark:focus:ring-blue-600 dark:focus:bg-blue-600 dark:bg-gray-700 dark:border-gray-600" >
                    <label for="gender-option-3" class="block ms-2  text-sm font-medium text-gray-900 dark:text-gray-300">
                      Other
                    </label>
                      </div>
                </fieldset> 

                <p 
                    data-th-if="${#fields.hasErrors('gender')}"
                    data-th-errors="*{gender}"
                    class="text-red-600 text-sm px-1 dark:text-red-500"
                >
                </p>
            </div> 
              
            <!-- email field -->
            <div class="mb-3">
                <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your email</label>
                <input 
                    type="email" 
                    id="email" 
                    th:field="*{email}"
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="name123@gmail.com.com" required />
                    <p 
                       data-th-if="${#fields.hasErrors('email')}"
                       data-th-errors="*{email}"
                       class="text-red-600 text-sm px-1 dark:text-red-500"
                       >
                    </p>
              </div>
           
             <!-- phoneNumber field -->
             <div class="mb-3">
                <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Phone Number</label>
                <input 
                type="tel" 
                id="phone" 
                th:field="*{phoneNumber}"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Phone Number" required />
                <p 
                       data-th-if="${#fields.hasErrors('phoneNumber')}"
                       data-th-errors="*{phoneNumber}"
                       class="text-red-600 text-sm px-1 dark:text-red-500"
                       >
                    </p>
              </div>
             
             <!-- Address field -->
             <div class="mb-3">
                <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Address</label>
                <input 
                    type="text" 
                    th:field="*{streetAddress}"
                    id="address" 
                    class="bg-gray-50 mb-2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Street Address" required 
                    />
                    
                    <input 
                    type="text" 
                    th:field="*{streetAddress2}"
                    id="address" 
                    class="bg-gray-50  mb-2 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Street Address Line 2" required 
                    />
                    <p 
                       data-th-if="${#fields.hasErrors('streetAddress')}"
                       data-th-errors="*{streetAddress}"
                       class="text-red-600 text-sm px-1 dark:text-red-500"
                       >
                    </p>

                    <div class="grid md:grid-cols-2 md:gap-6">
                        <div class="relative z-0 w-full mb-3 group">
                
                            <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Country</label>
                                <select 
                                id="country" 
                                name="country"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                >
                                    <option value="">Select Country</option>
                                    <option th:each="country : ${countrys}" th:value="${country.c_id}" th:text="${country.country_name}"></option>
                                </select>
                                <p 
                               data-th-if="${#fields.hasErrors('country')}"
                               data-th-errors="*{country}"
                               class="text-red-600 text-sm px-1 dark:text-red-500"
                               >
                            </p>
                        </div>
        
                        <div class="relative z-0 w-full mb-3 group">
                          
                                 <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">State</label>
                                 <select
                                  id="state"
                                   name="state"
                                   class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                   >
                                     <option value="">Select State</option>
                                 </select>
                                <p 
                                   data-th-if="${#fields.hasErrors('state')}"
                                   data-th-errors="*{state}"
                                   class="text-red-600 text-sm px-1 dark:text-red-500"
                                   >
                                </p>
                            </div>
                    </div>

                    <div class="grid md:grid-cols-2 md:gap-6">
                        <div class="relative z-0 w-full mb-5 group">
                            <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">City</label>
                            <div class="flex">
                                <select 
                                id="city" 
                                name="city"
                                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                                >
                                    <option value="">Select City</option>
                                </select>
                            </div>
                            <p 
                            data-th-if="${#fields.hasErrors('city')}"
                            data-th-errors="*{city}"
                            class="text-red-600 text-sm px-1 dark:text-red-500"
                            >
                            </div>
                            <div class="relative z-0 w-full  group">
                                <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Pincode</label>
                                <input 
                                    type="text" 
                                    id="pincode"
                                    data-th-field="*{pincode}" 
                                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Pincode" required
                                     />
                                    <p 
                                       data-th-if="${#fields.hasErrors('pincode')}"
                                       data-th-errors="*{pincode}"
                                       class="text-red-600 text-sm px-1 dark:text-red-500"
                                       >
                                    </p>
                                </div>
                    </div>
              </div>
               <!-- Birth Date field -->
              <div class="mb-3">
                <label for="text" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Birth Date</label>
                
            <div class="relative max-w-sm">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"/>
                    </svg>
                </div>
                <input 
                id="datepicker-autohide"
                data-th-field="*{birthDate}"
                datepicker datepicker-autohide type="text" 
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5  dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Select date">
            </div>
            <p
              data-th-if="${#fields.hasErrors('birthDate')}"
              data-th-errors="*{birthDate}"  
              class="text-red-600 text-sm px-1 dark:text-red-500" 
            >  
            </p>
                   

           </div>

              <!-- password field -->
              <div class="mb-3">
                <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Create password</label>
                <input 
                    type="password" 
                    th:field="*{password}"
                    id="password" 
                    class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Password" required />
                    <p 
                       data-th-if="${#fields.hasErrors('password')}"
                       data-th-errors="*{password}"
                       class="text-red-600 text-sm px-1 dark:text-red-500"
                       >
                    </p>
              </div>
              
             <!-- submit button -->
             <div class="mb-3 flex justify-center space-x-3">
                <button 
                    type="submit"
                    class="px-3 py-2 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm  text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Submit</button>
                <button
                    type="reset" 
                    class="px-3 py-2 text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm  text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800">Reset
                </button>
                    
                </div>
             
           </form>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            $('#country').change(function() {
                var countryId = $(this).val();
                if(countryId) {
                    $.get('/location/states', { countryId: countryId }, function(data) {
                        console.log(data);
                        $('#state').empty();
                        $('#state').append('<option value="">Select State</option>');
                        $.each(data, function(index, state) {
                            $('#state').append('<option value="' + state.s_id + '">' + state.state_name + '</option>');
                        });
                    });
                } else {
                    $('#state').empty();
                    $('#city').empty();
                }
            });

            $('#state').change(function() {
                var stateId = $(this).val();
                if(stateId) {
                    $.get('/location/cities', { stateId: stateId }, function(data) {
                        $('#city').empty();
                        $('#city').append('<option value="">Select City</option>');
                        $.each(data, function(index, city) {
                            $('#city').append('<option value="' + city.city_name + '">' + city.city_name + '</option>');
                        });
                    });
                } else {
                    $('#city').empty();
                }
            });

            // $( document ).ready(function() {
            //     $('.radio').removeAttr('checked');
            // });
        });
    </script>
</body>
</html>